(this["webpackJsonpreact-mastermind"]=this["webpackJsonpreact-mastermind"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,a){e.exports={HighScores:"HighScoresPage_HighScores__262Z1",cancel:"HighScoresPage_cancel__2M2TZ",table:"HighScoresPage_table__2PmjB"}},,function(e,t,a){e.exports={GuessRow:"GuessRow_GuessRow__3cpCu",rowNum:"GuessRow_rowNum__2xgKj"}},function(e,t,a){e.exports={ColorPicker:"ColorPicker_ColorPicker__17FeI",button:"ColorPicker_button__1fmRh"}},,,,,,function(e,t,a){e.exports={peg:"GuessPeg_peg__yFIR8"}},function(e,t,a){e.exports={button:"ScoreButton_button__1ZQHm"}},function(e,t,a){e.exports={GameBoard:"GameBoard_GameBoard__2IzhZ"}},function(e,t,a){e.exports={GameTimer:"GameTimer_GameTimer__2M0dq"}},,function(e,t,a){e.exports=a(46)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(20),l=a.n(r),o=(a(31),a(4)),c=a.n(o),i=a(8),m=a(9),u=(a(33),a(1)),h=a(2),d=a(21),g=a.n(d),p=e=>n.a.createElement("div",{className:g.a.peg,style:{backgroundColor:e.color,border:e.color?"1px solid ".concat(e.color):"1px dashed grey",cursor:e.currentGuess&&"pointer"},onClick:e.currentGuess?e.handlePegClick:null}),f=(a(34),e=>n.a.createElement("div",{className:"GuessPegs"},n.a.createElement(p,{color:e.colors[e.code[0]],currentGuess:e.currentGuess,handlePegClick:()=>e.handlePegClick(0)}),n.a.createElement(p,{color:e.colors[e.code[1]],currentGuess:e.currentGuess,handlePegClick:()=>e.handlePegClick(1)}),n.a.createElement(p,{color:e.colors[e.code[2]],currentGuess:e.currentGuess,handlePegClick:()=>e.handlePegClick(2)}),n.a.createElement(p,{color:e.colors[e.code[3]],currentGuess:e.currentGuess,handlePegClick:()=>e.handlePegClick(3)}))),E=(a(35),({score:e})=>{var t=("P".repeat(e.perfect)+"A".repeat(e.almost)+"I".repeat(4-e.perfect-e.almost)).split(""),a={width:10,height:10,margin:1,border:"2px solid",borderRadius:"50%"},s={P:{borderColor:"black",backgroundColor:"black"},A:{borderColor:"black",backgroundColor:"white"},I:{borderColor:"white",backgroundColor:"lightgrey"}};return n.a.createElement("div",{className:"GuessScore"},t.map((e,t)=>n.a.createElement("div",{key:t,style:Object(m.a)(Object(m.a)({},a),s[e])})))}),v=a(22),C=a.n(v),b=e=>n.a.createElement("button",{className:"".concat(C.a.button," btn btn-default"),disabled:e.disabled,onClick:e.handleScoreClick},"\u2714"),k=a(14),S=a.n(k),N=e=>n.a.createElement("div",{className:S.a.GuessRow},n.a.createElement("div",{className:S.a.rowNum,style:{color:e.currentGuess?"black":"lightgrey"}},e.rowIdx+1),n.a.createElement(f,{colors:e.colors,code:e.guess.code,currentGuess:e.currentGuess,handlePegClick:e.handlePegClick}),e.currentGuess&&4!==e.guess.score.perfect?n.a.createElement(b,{disabled:e.guess.code.includes(null),handleScoreClick:e.handleScoreClick}):n.a.createElement(E,{score:e.guess.score})),w=a(23),y=a.n(w),x=e=>n.a.createElement("div",{className:y.a.GameBoard},e.guesses.map((t,a)=>n.a.createElement(N,{guess:t,colors:e.colors,rowIdx:a,currentGuess:a===e.guesses.length-1,handlePegClick:e.handlePegClick,handleScoreClick:e.handleScoreClick,key:a}))),G=a(15),T=a.n(G),P=e=>n.a.createElement("div",{className:T.a.ColorPicker},e.colors.map((t,a)=>n.a.createElement("button",{key:t,className:T.a.button,style:{backgroundColor:e.selColorIdx===a?"white":t,borderColor:t},onClick:()=>e.handleColorSelection(a)}))),I=a(24),O=a.n(I);class _ extends s.Component{constructor(...e){super(...e),this.handleTick=()=>{this.props.isTiming&&this.props.handleTimerUpdate()}}componentDidMount(){this.timerId=setInterval(this.handleTick,1e3)}componentWillUnmount(){clearInterval(this.timerId)}render(){return n.a.createElement("div",{className:"".concat(O.a.GameTimer," flex-h")},function(e){var t=Math.floor(e/60).toString().padStart(2,"0"),a=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(a)}(this.props.elapsedTime))}}var j=_,L=e=>n.a.createElement("button",{className:"btn btn-default",onClick:e.handleNewGameClick},"New Game"),B=(a(36),e=>{var t=e.user?n.a.createElement("div",null,n.a.createElement(h.b,{to:"/high-scores",className:"NavBar-link"},"HIGH SCORES"),"\xa0\xa0|\xa0\xa0\xa0",n.a.createElement(h.b,{to:"",onClick:e.handleLogout,className:"NavBar-link"},"LOG OUT"),"\xa0\xa0|\xa0\xa0\xa0",n.a.createElement("span",{className:"NavBar-welcome"},"WELCOME, ",e.user.name)):n.a.createElement("div",null,n.a.createElement(h.b,{to:"/login",className:"NavBar-link"},"LOG IN"),"\xa0\xa0|\xa0\xa0",n.a.createElement(h.b,{to:"/signup",className:"NavBar-link"},"SIGN UP"));return n.a.createElement("div",{className:"NavBar"},t)}),D=(a(42),e=>n.a.createElement("div",{className:"GamePage"},n.a.createElement(B,{user:e.user,handleLogout:e.handleLogout}),n.a.createElement("div",{className:"flex-h align-flex-end"},n.a.createElement(x,{colors:e.colors,guesses:e.guesses,handlePegClick:e.handlePegClick,handleScoreClick:e.handleScoreClick}),n.a.createElement("div",{className:"GamePage-controls"},n.a.createElement(P,{colors:e.colors,selColorIdx:e.selColorIdx,handleColorSelection:e.handleColorSelection}),n.a.createElement(j,{elapsedTime:e.elapsedTime,handleTimerUpdate:e.handleTimerUpdate,isTiming:e.isTiming}),e.user&&n.a.createElement(h.b,{className:"btn btn-default GamePage-link-margin",to:"/high-scores"},"High Scores"),n.a.createElement(h.b,{className:"btn btn-default GamePage-link-margin",to:"/settings"},"Difficulty"),n.a.createElement(L,{handleNewGameClick:e.handleNewGameClick}))),n.a.createElement("footer",{className:"header-footer"},e.winTries?"You Won in ".concat(e.winTries," Guesses!"):"Good Luck!"))),U=(a(43),e=>{var t={border:"2px solid #333"};var a=Object.keys(e.colorsLookup).map(a=>n.a.createElement("div",{className:"Settings-level-row",key:a},n.a.createElement("button",{className:"Settings-level-btn btn btn-default",style:a===e.difficulty?t:null,disabled:a===e.difficulty,onClick:()=>function(t){e.handleDifficultyChange(t),e.history.push("/")}(a)},a),n.a.createElement("div",{className:"Settings-level-colors"},e.colorsLookup[a].map(e=>n.a.createElement("div",{className:"Settings-color",style:{backgroundColor:e},key:e})))));return n.a.createElement("div",{className:"Settings"},n.a.createElement("header",{className:"header-footer"},"Set Difficulty Level"),n.a.createElement("div",null,a),n.a.createElement("div",null,n.a.createElement(h.b,{className:"Settings-cancel btn btn-default btn-sm",to:"/"},"Cancel")))}),M=a(12),H=a.n(M),F={setToken:function(e){localStorage.setItem("token",e)},getToken:R,getUserFromToken:function(){var e=R();return e?JSON.parse(atob(e.split(".")[1])).user:null},removeToken:function(){localStorage.removeItem("token")}};function R(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var A={index:function(){return fetch("/api/scores/").then(e=>e.json())},create:function(e){var t={method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer "+F.getToken()},body:JSON.stringify(e)};return fetch("/api/scores/",t).then(e=>e.json())}};class J extends s.Component{componentDidMount(){var e=this;return Object(i.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.index();case 2:a=t.sent,e.props.handleUpdateScores(a);case 4:case"end":return t.stop()}}),t)})))()}render(){var e=this.props.scores.map((e,t)=>n.a.createElement("tr",{key:t},n.a.createElement("td",null,n.a.createElement("span",{className:"badge"},t+1)),n.a.createElement("td",null,e.initials),n.a.createElement("td",null,e.numGuesses),n.a.createElement("td",null,function(e){var t=Math.floor(e/60).toString().padStart(2,"0"),a=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(a)}(e.seconds))));return n.a.createElement("div",{className:H.a.HighScores},n.a.createElement("header",{className:"header-footer"},"High Scores"),this.props.scores.length?n.a.createElement("table",{className:"".concat(H.a.table," table text-info")},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{width:80},"#"),n.a.createElement("th",{width:100},"Initials"),n.a.createElement("th",{width:100},"Guesses"),n.a.createElement("th",null,"Seconds"))),n.a.createElement("tbody",null,e)):n.a.createElement("h4",{className:"text-info"},"No High Scores Yet"),n.a.createElement("div",null,n.a.createElement(h.b,{className:"".concat(H.a.cancel," btn btn-default btn-sm"),to:"/"},"Back to Game")))}}var W=J;var z={signup:function(e){return fetch("/api/users/signup",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then(e=>{if(e.ok)return e.json();throw new Error("Email already taken!")}).then(({token:e})=>F.setToken(e))},getUser:function(){return F.getUserFromToken()},logout:function(){F.removeToken()},login:function(e){return fetch("/api/users/login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then(e=>{if(e.ok)return e.json();throw new Error("Bad Credentials!")}).then(({token:e})=>F.setToken(e))}};class Z extends s.Component{constructor(...e){var t;super(...e),t=this,this.state={name:"",email:"",password:"",passwordConf:""},this.handleChange=e=>{this.props.updateMessage(""),this.setState({[e.target.name]:e.target.value})},this.handleSubmit=function(){var e=Object(i.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,z.signup(t.state);case 4:t.props.handleSignupOrLogin(),t.props.history.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.props.updateMessage(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}isFormInvalid(){return!(this.state.name&&this.state.email&&this.state.password===this.state.passwordConf)}render(){return n.a.createElement("div",null,n.a.createElement("header",{className:"header-footer"},"Sign Up"),n.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Name",value:this.state.name,name:"name",onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",value:this.state.email,name:"email",onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",value:this.state.password,name:"password",onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("input",{type:"password",className:"form-control",placeholder:"Confirm Password",value:this.state.passwordConf,name:"passwordConf",onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-sm-12 text-center"},n.a.createElement("button",{className:"btn btn-default",disabled:this.isFormInvalid()},"Sign Up"),"\xa0\xa0",n.a.createElement(h.b,{to:"/"},"Cancel")))))}}var Y=Z;a(44);class q extends s.Component{constructor(e){super(e),this.updateMessage=e=>{this.setState({message:e})},this.state={message:""}}render(){return n.a.createElement("div",{className:"SignupPage"},n.a.createElement(Y,Object.assign({},this.props,{updateMessage:this.updateMessage})),n.a.createElement("p",null,this.state.message))}}var K=q;a(45);class Q extends s.Component{constructor(...e){var t;super(...e),t=this,this.state={email:"",pw:""},this.handleChange=e=>{this.setState({[e.target.name]:e.target.value})},this.handleSubmit=function(){var e=Object(i.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,z.login(t.state);case 4:t.props.handleSignupOrLogin(),t.props.history.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Invalid login");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}render(){return n.a.createElement("div",{className:"LoginPage"},n.a.createElement("header",{className:"header-footer"},"Log In"),n.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",value:this.state.email,name:"email",onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",value:this.state.pw,name:"pw",onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-sm-12 text-center"},n.a.createElement("button",{className:"btn btn-default"},"Log In"),"\xa0\xa0\xa0",n.a.createElement(h.b,{to:"/"},"Cancel")))))}}var $=Q,V={Easy:["#7CCCE5","#FDE47F","#E04644","#B576AD"],Moderate:["#7CCCE5","#FDE47F","#E04644","#B576AD","#B7D968"],Difficult:["#7CCCE5","#FDE47F","#E04644","#B576AD","#B7D968","#555E7B"]};class X extends s.Component{constructor(){super(),this.isHighScore=e=>{var t=this.state.scores[this.state.scores.length-1];return e.length<t.numGuesses||e.length===t.numGuesses&&this.state.elapsedTime<t.seconds},this.handleTimerUpdate=()=>{this.setState(e=>({elapsedTime:++e.elapsedTime}))},this.handleDifficultyChange=e=>{this.setState({difficulty:e},()=>this.handleNewGameClick())},this.handleColorSelection=e=>{this.setState({selColorIdx:e})},this.handleNewGameClick=()=>{this.setState(this.getInitialState())},this.handlePegClick=e=>{var t=this.state.guesses.length-1,a=[...this.state.guesses],s=Object(m.a)({},a[t]),n=[...s.code];n[e]=this.state.selColorIdx,s.code=n,a[t]=s,this.setState({guesses:a})},this.handleScoreClick=()=>{var e=this.state.guesses.length-1,t=[...this.state.guesses[e].code],a=[...this.state.code],s=0,n=0;t.forEach((e,n)=>{a[n]===e&&(s++,t[n]=a[n]=null)}),t.forEach((e,t)=>{if(null!==e){var s=a.indexOf(e);s>-1&&(n++,a[s]=null)}});var r=[...this.state.guesses],l=Object(m.a)({},r[e]),o=Object(m.a)({},l.score);o.perfect=s,o.almost=n,l.score=o,r[e]=l,4===s?this.setState(e=>({isTiming:!1}),Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.scores.length<20||this.isHighScore(r))){e.next=5;break}return t=prompt("Congrats you have a top-20 score! Enter your initials: ").substr(0,3),e.next=4,A.create({initials:t,numGuesses:r.length,seconds:this.state.elapsedTime});case 4:this.props.history.push("/high-scores");case 5:case"end":return e.stop()}}),e,this)})))):r.push(this.getNewGuess()),this.setState({guesses:r,isTiming:4!==s})},this.handleUpdateScores=e=>{this.setState({scores:e})},this.handleLogout=()=>{z.logout(),this.setState({user:null})},this.handleSignupOrLogin=()=>{this.setState({user:z.getUser()})},this.state=Object(m.a)(Object(m.a)({},this.getInitialState()),{},{difficulty:"Easy",scores:[],user:z.getUser()})}getInitialState(){return{selColorIdx:0,guesses:[this.getNewGuess()],code:this.genCode(),elapsedTime:0,isTiming:!0}}getNewGuess(){return{code:[null,null,null,null],score:{perfect:0,almost:0}}}genCode(){var e=this.state&&V[this.state.difficulty].length;return e=e||4,new Array(4).fill().map(t=>Math.floor(Math.random()*e))}getWinTries(){var e=this.state.guesses.length-1;return 4===this.state.guesses[e].score.perfect?e+1:0}componentDidMount(){var e=this;return Object(i.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.index();case 2:a=t.sent,e.setState({scores:a});case 4:case"end":return t.stop()}}),t)})))()}render(){var e=this.getWinTries();return n.a.createElement("div",null,n.a.createElement("header",{className:"header-footer"},"R E A C T \xa0\xa0\xa0  M A S T E R M I N D"),n.a.createElement(u.d,null,n.a.createElement(u.b,{exact:!0,path:"/",render:()=>n.a.createElement(D,{winTries:e,colors:V[this.state.difficulty],selColorIdx:this.state.selColorIdx,guesses:this.state.guesses,elapsedTime:this.state.elapsedTime,isTiming:this.state.isTiming,user:this.state.user,handleColorSelection:this.handleColorSelection,handleNewGameClick:this.handleNewGameClick,handlePegClick:this.handlePegClick,handleScoreClick:this.handleScoreClick,handleTimerUpdate:this.handleTimerUpdate,handleLogout:this.handleLogout})}),n.a.createElement(u.b,{exact:!0,path:"/settings",render:e=>n.a.createElement(U,Object.assign({},e,{colorsLookup:V,difficulty:this.state.difficulty,handleDifficultyChange:this.handleDifficultyChange}))}),n.a.createElement(u.b,{exact:!0,path:"/signup",render:({history:e})=>n.a.createElement(K,{history:e,handleSignupOrLogin:this.handleSignupOrLogin})}),n.a.createElement(u.b,{exact:!0,path:"/login",render:({history:e})=>n.a.createElement($,{handleSignupOrLogin:this.handleSignupOrLogin,history:e})}),n.a.createElement(u.b,{exact:!0,path:"/high-scores",render:()=>z.getUser()?n.a.createElement(W,{scores:this.state.scores,handleUpdateScores:this.handleUpdateScores}):n.a.createElement(u.a,{to:"/login"})})))}}var ee=X;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(h.a,null,n.a.createElement(u.b,{component:ee})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}],[[26,1,2]]]);
//# sourceMappingURL=main.02bdc1d1.chunk.js.map